# ESPHome configuration for heat pump modbus interface
# Generated from modbus register definitions
# Date: 2025-08-29 11:02:06

esphome:
  name: 'aerona-modbus'
  platform: ESP32
  board: esp32dev
wifi:
  ssid: '!secret wifi_ssid'
  password: '!secret wifi_password'
  ap:
    ssid: 'HeatPump-Fallback'
    password: '!secret ap_password'
logger:
  level: DEBUG
  baud_rate: 0
api:
  encryption:
    key: '!secret api_encryption_key'
ota:
  platform: esphome
  password: '!secret ota_password'
web_server:
  port: 80
uart:
  id: mod_bus
  tx_pin: GPIO17
  rx_pin: GPIO16
  baud_rate: 19200
  stop_bits: 2
  parity: NONE
modbus:
  id: modbus1
  uart_id: mod_bus
modbus_controller:
  id: heatpump
  address: 2
  modbus_id: modbus1
  setup_priority: -10
  update_interval: 30s
switch:
  - name: Reboot Operation
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: reboot_operation
    register_type: coil
    address: 1
    bitmask: 1
    icon: 'mdi:information'
  - name: Anti Legionella Function
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: anti_legionella_function
    register_type: coil
    address: 6
    bitmask: 1
    icon: 'mdi:information'
sensor:
  - name: Return Water Temperature
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: return_water_temperature
    register_type: holding
    address: 0
    value_type: U_WORD
    unit_of_measurement: °C
    device_class: temperature
    state_class: measurement
    filters:
      - 
        multiply: 1
    accuracy_decimals: 1
    icon: 'mdi:thermometer'
    skip_updates: 1
  - name: Outdoor Air Temperature
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: outdoor_air_temperature
    register_type: holding
    address: 6
    value_type: U_WORD
    unit_of_measurement: °C
    device_class: temperature
    state_class: measurement
    filters:
      - 
        multiply: 1
    accuracy_decimals: 1
    icon: 'mdi:thermometer'
    skip_updates: 1
  - name: Outgoing Water Temperature
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: outgoing_water_temperature
    register_type: holding
    address: 9
    value_type: U_WORD
    unit_of_measurement: °C
    device_class: temperature
    state_class: measurement
    filters:
      - 
        multiply: 1
    accuracy_decimals: 1
    icon: 'mdi:thermometer'
    skip_updates: 1
  - name: Zone1 Room Temperature
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: zone1_room_temperature
    register_type: holding
    address: 11
    value_type: U_WORD
    unit_of_measurement: °C
    device_class: temperature
    state_class: measurement
    filters:
      - 
        multiply: 0.1
    accuracy_decimals: 1
    icon: 'mdi:thermometer'
    skip_updates: 1
  - name: Zone2 Room Temperature
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: zone2_room_temperature
    register_type: holding
    address: 12
    value_type: U_WORD
    unit_of_measurement: °C
    device_class: temperature
    state_class: measurement
    filters:
      - 
        multiply: 0.1
    accuracy_decimals: 1
    icon: 'mdi:thermometer'
    skip_updates: 1
  - name: Dhw Tank Temperature
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: dhw_tank_temperature
    register_type: holding
    address: 16
    value_type: U_WORD
    unit_of_measurement: °C
    device_class: temperature
    state_class: measurement
    filters:
      - 
        multiply: 1
    accuracy_decimals: 1
    icon: 'mdi:thermometer'
    skip_updates: 1
  - name: Operating Mode
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: operating_mode
    register_type: holding
    address: 10
    value_type: U_WORD
    icon: 'mdi:information'
    skip_updates: 1
  - name: Dhw Operating Mode
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: dhw_operating_mode
    register_type: holding
    address: 13
    value_type: U_WORD
    icon: 'mdi:information'
    skip_updates: 1
  - name: Current Error Code
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: current_error_code
    register_type: holding
    address: 21
    value_type: U_WORD
    icon: 'mdi:alert-circle'
    skip_updates: 1
climate:
  - name: Heating Zone 1
    platform: thermostat
    id: heating_zone_1
    sensor: heating_zone_1_temp
    min_temperature: 10
    max_temperature: 30
    temperature_step: 0.5
    heat_action:
      switch.turn_on: heating_zone_1_heat
    idle_action:
      switch.turn_off: heating_zone_1_heat
  - name: Heating Zone 2
    platform: thermostat
    id: heating_zone_2
    sensor: heating_zone_2_temp
    min_temperature: 10
    max_temperature: 30
    temperature_step: 0.5
    heat_action:
      switch.turn_on: heating_zone_2_heat
    idle_action:
      switch.turn_off: heating_zone_2_heat
  - name: Dhw Control
    platform: thermostat
    id: dhw_control
    sensor: dhw_control_temp
    min_temperature: 40
    max_temperature: 60
    temperature_step: 0.5
    heat_action:
      switch.turn_on: dhw_control_heat
    idle_action:
      switch.turn_off: dhw_control_heat
