# ESPHome configuration for heat pump modbus interface
# Generated from modbus register definitions
# Date: 2025-08-29 20:40:36

esphome:
  name: 'midea/systemair-modbus'
  platform: ESP32
  board: esp32dev
wifi:
  ssid: '!secret wifi_ssid'
  password: '!secret wifi_password'
  ap:
    ssid: 'HeatPump-Fallback'
    password: '!secret ap_password'
logger:
  level: DEBUG
  baud_rate: 0
api:
  encryption:
    key: '!secret api_encryption_key'
ota:
  platform: esphome
  password: '!secret ota_password'
web_server:
  port: 80
uart:
  id: mod_bus
  tx_pin: GPIO17
  rx_pin: GPIO16
  baud_rate: 9600
  stop_bits: 1
  parity: NONE
modbus:
  id: modbus1
  uart_id: mod_bus
modbus_controller:
  id: heatpump
  address: 2
  modbus_id: modbus1
  setup_priority: -10
  update_interval: 30s
switch:
  - name: Floor Heating Power
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: floor_heating_power
    register_type: holding
    address: 0
    bitmask: 1
    icon: 'mdi:radiator'
  - name: Zone1 Power
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: zone1_power
    register_type: holding
    address: 0
    bitmask: 1
    icon: 'mdi:information'
  - name: Dhw Power
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: dhw_power
    register_type: holding
    address: 0
    bitmask: 1
    icon: 'mdi:information'
  - name: Zone2 Power
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: zone2_power
    register_type: holding
    address: 0
    bitmask: 1
    icon: 'mdi:information'
  - name: Silent Mode
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: silent_mode
    register_type: holding
    address: 5
    bitmask: 1
    icon: 'mdi:information'
  - name: Eco Mode
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: eco_mode
    register_type: holding
    address: 5
    bitmask: 1
    icon: 'mdi:information'
  - name: Disinfect Mode
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: disinfect_mode
    register_type: holding
    address: 5
    bitmask: 1
    icon: 'mdi:information'
  - name: Holiday Away
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: holiday_away
    register_type: holding
    address: 5
    bitmask: 1
    icon: 'mdi:information'
sensor:
  - name: Compressor Status
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: compressor_status
    register_type: holding
    address: 101
    value_type: U_WORD
    icon: 'mdi:air-conditioner'
  - name: Defrost Status
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: defrost_status
    register_type: holding
    address: 128
    value_type: U_WORD
    icon: 'mdi:information'
  - name: Anti Freeze Status
    platform: modbus_controller
    modbus_controller_id: heatpump
    id: anti_freeze_status
    register_type: holding
    address: 128
    value_type: U_WORD
    icon: 'mdi:information'
climate:
  - name: Zone1 Climate
    platform: thermostat
    id: zone1_climate
    sensor: zone1_climate_temp
    min_temperature: 17
    max_temperature: 30
    temperature_step: 0.5
  - name: Water Flow Climate
    platform: thermostat
    id: water_flow_climate
    sensor: water_flow_climate_temp
    min_temperature: 5
    max_temperature: 60
    temperature_step: 0.5
  - name: Dhw Climate
    platform: thermostat
    id: dhw_climate
    sensor: dhw_climate_temp
    min_temperature: 40
    max_temperature: 60
    temperature_step: 0.5
